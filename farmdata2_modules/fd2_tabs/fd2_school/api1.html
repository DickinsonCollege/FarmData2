<!DOCTYPE html>
<html>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
<div id="harvestReport" style="[v-cloak] {display:none;}">
    <!-- PAGE HEADER -->
    <h1>Harvest Report</h1>
    <p>This page is a <i>mockup</i> of a simplified harvest report.</p>
    <!-- REPORT TITLE INPUT -->
    <label for="reportTitle"> Title:</label>
    <input type="text" id="reportTitle" name="reportTitle" v-model="header">
    <br></br>
    <!-- REPORT START DATE INPUT -->
    <label for="reportStartDate">Start:</label>
    <input type="Date" name="reportStartDate" id="reportStartDate" min="2014-01-01" :max="reportEndDate" v-model="reportStartDate">
    <!-- REPORT END DATE INPUT -->
    <label for="reportEndDate">End:</label>
    <input type="Date" id="reportEndDate" name="reportEndDate" :min="reportStartDate" max="2022-01-01" v-model="reportEndDate">
    <br></br>
    <!-- CROP INPUT -->
    <label for="crop">Crop:</label>
    <select id="crop" name="crop" v-model="selectedCrop">
        <option v-for="crop in crops">{{ crop }}</option>
    </select>
    <!-- FIELD INPUT -->
    <label for="Field">Field:</label>
    <select id="Field" name="Field" v-model="selectedField">
        <option v-for="field in fields">{{ field }}</option>
    </select>
    <br></br>
    <!-- GENERATE REPORT BUTTON -->
    <input type="button" value="Generate Report" @click="saveLog(); generateData();"                      >
    <hr>
    </hr>
    <!-- REPORT TITLE -->
    <h1>{{header ? header : "Mock Harvest Report"}}</h1>
    <!-- REPORT DETAILS -->
    <p>Details:</p>
    <ul>
        <li><strong>Farm</strong>: {{ farm }}</li>
        <li><strong>User</strong>: {{ user }}</li>
        <li><strong>Language</strong>: {{ language }}</li>
    </ul>
    <ul>
        <li><strong>Start</strong>: {{reportStartDate}}</li>
        <li><strong>End</strong>: {{reportEndDate}}</li>
        <li><strong>Crop</strong>: {{ selectedCrop }}</li>
    </ul>
    <!-- HARVEST LOG TABLE -->
    <table border="1" v-if="harvestLog.length != 0">
        <p v-if="harvestLog.length == 0">No matching records</p>
        <tr>
            <th>Row</th>
            <th>Date</th>
            <th>Area</th>
            <th>Crop</th>
            <th>Yeild</th>
            <th>Units</th>
            <th>Delete</th>
        </tr>
        <tr v-for="(log, index) in harvestLog">
            <td>{{ index }}</td>
            <td>{{ log.date }}</td>
            <td>{{ log.area }}</td>
            <td>{{ log.crop }}</td>
            <td>{{ log.yeild }}</td>
            <td>{{ log.units }}</td>
            <td><button type="button" @click='deleteLog'>Delete</button></td>
        </tr>
    </table>
</div>
<script>
var harvestReport = new Vue({
    el: '#harvestReport  ',
    data: {
        farm: '',
        user:'',
        language:'',
        header: 'My Sample Harvest Report',
        reportStartDate: '2020-05-05',
        reportEndDate: '2022-05-15',
        selectedCrop: 'Kale',
        crops: ['Broccoli', 'Kale', 'Peas'],
        selectedField: 'All',
        fields: ['All', 'Chuau-1', 'SQ7'],
        harvestLog: [],
        someHarvestLogs: {
            firstLog: {
                date: '2018-05-02',
                area: 'Chuau-1',
                crop: 'Kale',
                'yeild': 10,
                units: 'Bunches'
            },
            secondLog: {
                date: '2020-08-01',
                area: 'SQ7',
                crop: 'Broccoli',
                'yeild': 15,
                units: 'Pounds' }
        }
    },
    methods: {
        saveLog: function(){
            this.harvestLog.push(this.someHarvestLogs.firstLog);
        },
        deleteLog: function(logIndex){
            this.harvestLog.splice(this.logIndex, 1);
        },
        generateData: function(){
            
            axios
                .get('/farm.json')
                .then((response)=>{
                    console.log("Got Response");
                    console.log(response);

                    this.farm = response.data.name;
                    this.user = response.data.user.name;
                    this.language = response.data.user.language

                })
                .catch((error) => {
                    console.log("Error Occured");
                    console.log(error);
                })

                

        }
    }
});
Vue.config.devtools = true
</script>
</html>

