<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Vue Data Binding Spike</title>
    </head>
    <body>
        <div id="vue-spike" v-cloak>
            
            <input type="text" v-model="rptTitle">

            <h1>The Harvest Report</h1> 
            <p>This page is a <i>mockup</i> of a simplified harvest report.</p>
            <hr>

            <h1>{{ rptTitle ? rptTitle : 'Mock Harvest Report' }}</h1>

            <p>Details:</p>

        <ul>
            <li><b>Farm:</b>{{ farm }}</li>
            <li><b>User:</b>{{ user }}</li>
            <li><b>Language:</b>{{ language }}</li>
            <br>
            <li><b>Start:</b> {{ rptStartDate }}</li>
            <li><b>End:</b> {{ rptEndDate }}</li>
            <li><b>Crop:</b> {{ cropSelected }}</li>

        </ul>

        <br>

        <label for="crop">Crop:</label>

        <select name="crops" id="crop-select" v-model="cropSelected">
            <option v-for="crop in crops">{{ crop }}</option>
        </select>

        <br>

        <label for="field">Field:</label>

        <select name="fields" id="field-select">
            <option v-for="field in fields">{{ field }}</option>
        </select>

        <br>

        <label for="start">Start date:</label>

        <input type="date" id="start" name="trip-start" v-model="rptStartDate"
            min="2014-01-01" max="2020-01-01">
        </input>

        <br>

        <label for="end">End date:</label>

        <input type="date" id="end" name="trip-end" v-model="rptEndDate"
            min="2020-05-05" max="2022-01-01">

        </input>

        <ul>
            <li v-for='(name,index) in names'>{{ name + ' (' + index + ')' }}</li>
        </ul>

        <ul>
            <li v-for="card in cards">{{ card.rank + ' of ' + card.suit }}</li>
        </ul>

        <button type="button" v-on:click="generate" @click="">
            Generate
        </button>

        <div v-if="this.logObj.length === 0">
        <p><b>There are no logs yet!</b></p>
        </div>
        <div v-if="this.logObj.length !== 0"></div>
            <table v-if="this.logObj.length !== 0" class="table mt-5">
                <thead>
                    <tr>
                    <th scope="col">Row</th>
                    <th scope="col">Date<th>
                    <th scope="col">Area</th>
                    <th scope="col">Crop</th>
                    <th scope="col">Yield</th>
                    <th scope="col">Units</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="(log, i) in logObj" :key="i">
                    <th scope="row">{{ ++i }}</th>
                    <td>{{ log.date }}</td>
                    <td>{{ log.area }}</td>
                    <td>{{ log.crop }}</td>
                    <td>{{ log.yield }}</td>
                    <td>{{ log.units }}</td>
                    </tr>
                </tbody>
            </table>
        </div>


        </div>
        <script>
        var spikeTest = new Vue({
            el: '#vue-spike',
            data: {
            rptTitle: 'My Sample Harvest Report',
            rptStartDate:'',
            rptEndDate:'',
            cropSelected: '',
            names: [ 'Joe', 'Arun', 'Ouwen', 'Anh', 'Sue' ],
            crops: [ 'Kale', 'Broccoli', 'Peas' ],
            fields: [ 'All', 'Chuau-1', 'SQ7' ],
            logObj1: { date: '2018-05-02', area: 'Chuau-1', crop: 'Kale', yield: '10', units: 'Bunches' },
            logObj2: {date: '2019-06-05', area: 'MudBrook', crop: 'Corn', yield: '20', units: 'Bushels' },
               
            cards: [

		        {suit: 'H', rank: '3'},

		        {suit: 'S', rank: 'K'},

                {suit: 'D', rank: '7'}
            ],

            logObj: [ ],

            farm: '',
            user: '',
            language: '',

        

            },
            methods: {
                generate: function() {
                    

                    axios.get('api/endpoint/goes/here')  // this line sends the request.
                        .then((response) => {
                            console.log("Got Response")
                            console.log(response)

                            this.farm=response.data.name;
                            this.user=response.data.user.name;
                            this.language=response.data.languages.en.name;

                        })
                        .catch((error) => {
                            console.log("Error Occurred")
                            console.log(error)
                        })
                    
                    this.logObj.push(this.logObj1);
                    this.farm = 'Sample Farm';
                    this.user = 'manager1';
                    this.language= 'english';

                }
            }
        });
        Vue.config.devtools = true;
        </script>

        

    </body>
</html>