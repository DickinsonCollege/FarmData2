<body>
    <div id="transplanting">
        <h1>Transplanting Report</h1>
        Hello
        
        <label for="crop">Crop:</label>
        <select id="crop" name="crop" v-model="selectedCrop">
            <option v-for="crop in selectCrop">{{ crop }}</option>
        </select>

        <button class="btn btn-primary" @click="generateReport();">Generate Report</button>

        <table style="width:100%" border=1>
            <tr>
                <th>Crop</th>
                <th>Field</th>
                <th>Date of Tray Seeding</th>
                <th>Date of Transplanting</th>
                <th>Days in Tray</th>
                <th>Bed Feet</th>
                <th>Rows/Bed</th>
                <th>Row Feet</th>
                <th>Trays</th>
                <th>Hours</th>
                <th>Annual</th>
                <th>Last Harvest Date</th>
                <th>Comments</th>
                <th>User</th>
                <th>Edit</th>
            </tr>
            <tr v-for="(harvest, reportIndex) in reportHarvest">
                <td> {{harvest.crop}} </td>
                <td> </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
                <td>  </td>
            </tr>
        </table>
    </div>

<!-- Vue Variable -->
    <script src="https://unpkg.com/vue"></script>
    <script>
		var harvestReport = new Vue({
		    el: '#transplanting',
			data: {
                message: 'Hi guys!',
                reportHarvest: [],
                selectCrop: null,
                selectedCrop: 'Arugula',
            },
            created(){
                axios.get("/farm_asset.json?type=planting")
                .then(response => {
                    this.selectCrop = response.data.list.map(f => f.name).sort();
                })
                .catch(error => {
                    this.selectCrop = ["Service Unavailable"];
                    console.log.error;
                });
            },
            methods: {
                generateReport: function() {
                    var link = '/log.json?type=farm_transplanting&name=transplant+' + this.selectedCrop;
                    axios.get(link)
                    .then(response => {
		                this.reportHarvest = response.data.list.map(h => {
			                return {
				            // date: this.timestampToYMD(h.timestamp), 
				            // field: h.area[0].name, 
				            crop: this.getCropName(h.name), 
				            // yield:h.quantity[0].value,
			                };
		                });
	                })                    
                },
                getCropName: function(str){
                    var split = str.split(' ');
                    // return split[split.length - 1];
                    return str;
                },
            },
            computed:{
            },
        });
        Vue.config.devtools = true;
    </script>
</body>