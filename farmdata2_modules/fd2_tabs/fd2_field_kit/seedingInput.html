<body>
    <div id='seedingInput'>
       <h1>Seeding Input Log</h1> 
       <date-selection :default-date='selectedDate' @date-changed='setNewDate'>Date of Seeding:</date-selection>

       <br>

       <dropdown-with-all :dropdown-list='cropArray' @selection-changed='setNewCrop'>Crop:</dropdown-with-all>
       <dropdown-with-all :dropdown-list='areaArray' @selection-changed='setNewArea'>Area:</dropdown-with-all>

       <br>

       <input type='radio' name='typeOfSeeding' @click='setTraySeeding'><label>Tray Seedings</label>
       <input type='radio' name='typeOfSeeding' @click='setDirectSeeding'><label>Direct Seedings</label>

       <br>

       <label>Number of Workers: </label><input type=number v-model='numWorkers'>
       <br>
       <div style='display: flex;'>
            <label>Time Spent: </label><input type=number v-model='time'>
            <dropdown-with-all :dropdown-list='timeUnits' @selection-changed='setNewTimeUnit'>Units:</dropdown-with-all>
       </div>
       <label>Comments: </label><textarea></textarea>
    </div>

    <script>
        new Vue({
            el: '#seedingInput',
            components:{
                'date-selection': DateSelectionComponent,
                'dropdown-with-all': DropdownWithAllComponent
            },
            data:{
                selectedDate: dayjs().format('YYYY-MM-DD').toString(),
                selectedCrop: null,
                selectedArea: null,
                selectedSeedingType: null,
                selectedTimeUnit: null,
                numWorkers: 0,
                time: 0, 
                cropArray: [],
                areaArray: [],
                timeUnits: ['minutes', 'hours'],
            },
            methods:{
                setNewDate(newDate){
                    this.selectedDate = newDate
                },
                setNewCrop(newCrop){
                    this.selectedCrop = newCrop
                },
                setNewArea(newArea){
                    this.selectedArea = newArea
                },
                setTraySeeding(){
                    this.selectedSeedingType = 'Tray Seedings'
                },
                setDirectSeeding(){
                    this.selectedSeedingType = 'Direct Seedings'
                },
                setNewTimeUnit(newTimeUnit){
                    this.selectedTimeUnit = newTimeUnit
                }
            },
            created(){
                let fullResponse = []
                getAllPages('/taxonomy_term.json?bundle=farm_crops',fullResponse).then(() => {
                    this.cropArray = fullResponse.map((h) => h.name)
                })
                getAllPages('/taxonomy_term.json?bundle=farm_areas', this.areaArray).then(() => {
                    this.areaArray = this.areaArray.map((h) => h.name)
                })
            }
        })
    Vue.config.devtools = true;
    </script>
</body>