import { Event } from '../../../base/common/event';
import { Disposable } from '../../../base/common/lifecycle';
import { URI } from '../../../base/common/uri';
import { ISingleEditOperation } from '../core/editOperation';
import { ITextBuffer, ITextBufferFactory, ITextModel, ITextModelCreationOptions } from '../model';
import { ILanguageSelection, ILanguageService } from '../languages/language';
import { IModelService, DocumentTokensProvider } from './model';
import { ITextResourcePropertiesService } from './textResourceConfiguration';
import { IConfigurationService } from '../../../platform/configuration/common/configuration';
import { IThemeService } from '../../../platform/theme/common/themeService';
import { ILogService } from '../../../platform/log/common/log';
import { IUndoRedoService } from '../../../platform/undoRedo/common/undoRedo';
import { EditStackElement } from '../model/editStack';
import { SemanticTokensProviderStyling } from './semanticTokensProviderStyling';
import { ILanguageConfigurationService } from '../languages/languageConfigurationRegistry';
import { ILanguageFeatureDebounceService } from './languageFeatureDebounce';
import { ILanguageFeaturesService } from './languageFeatures';
export interface IEditorSemanticHighlightingOptions {
    enabled: true | false | 'configuredByTheme';
}
export interface EditStackPastFutureElements {
    past: EditStackElement[];
    future: EditStackElement[];
}
export declare class ModelService extends Disposable implements IModelService {
    private readonly _configurationService;
    private readonly _resourcePropertiesService;
    private readonly _themeService;
    private readonly _logService;
    private readonly _undoRedoService;
    private readonly _languageService;
    private readonly _languageConfigurationService;
    private readonly _languageFeatureDebounceService;
    static MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK: number;
    _serviceBrand: undefined;
    private readonly _onModelAdded;
    readonly onModelAdded: Event<ITextModel>;
    private readonly _onModelRemoved;
    readonly onModelRemoved: Event<ITextModel>;
    private readonly _onModelModeChanged;
    readonly onModelLanguageChanged: Event<{
        model: ITextModel;
        oldLanguageId: string;
    }>;
    private _modelCreationOptionsByLanguageAndResource;
    /**
     * All the models known in the system.
     */
    private readonly _models;
    private readonly _disposedModels;
    private _disposedModelsHeapSize;
    private readonly _semanticStyling;
    constructor(_configurationService: IConfigurationService, _resourcePropertiesService: ITextResourcePropertiesService, _themeService: IThemeService, _logService: ILogService, _undoRedoService: IUndoRedoService, _languageService: ILanguageService, _languageConfigurationService: ILanguageConfigurationService, _languageFeatureDebounceService: ILanguageFeatureDebounceService, languageFeaturesService: ILanguageFeaturesService);
    private static _readModelOptions;
    private _getEOL;
    private _shouldRestoreUndoStack;
    getCreationOptions(language: string, resource: URI | undefined, isForSimpleWidget: boolean): ITextModelCreationOptions;
    private _updateModelOptions;
    private static _setModelOptionsForModel;
    private _insertDisposedModel;
    private _removeDisposedModel;
    private _ensureDisposedModelsHeapSize;
    private _createModelData;
    updateModel(model: ITextModel, value: string | ITextBufferFactory): void;
    private static _commonPrefix;
    private static _commonSuffix;
    /**
     * Compute edits to bring `model` to the state of `textSource`.
     */
    static _computeEdits(model: ITextModel, textBuffer: ITextBuffer): ISingleEditOperation[];
    createModel(value: string | ITextBufferFactory, languageSelection: ILanguageSelection | null, resource?: URI, isForSimpleWidget?: boolean): ITextModel;
    setMode(model: ITextModel, languageSelection: ILanguageSelection): void;
    destroyModel(resource: URI): void;
    getModels(): ITextModel[];
    getModel(resource: URI): ITextModel | null;
    getSemanticTokensProviderStyling(provider: DocumentTokensProvider): SemanticTokensProviderStyling;
    protected _schemaShouldMaintainUndoRedoElements(resource: URI): boolean;
    private _onWillDispose;
    private _onDidChangeLanguage;
}
export interface ILineSequence {
    getLineContent(lineNumber: number): string;
}
export declare const SEMANTIC_HIGHLIGHTING_SETTING_ID = "editor.semanticHighlighting";
export declare function isSemanticColoringEnabled(model: ITextModel, themeService: IThemeService, configurationService: IConfigurationService): boolean;
declare class SemanticStyling extends Disposable {
    private readonly _themeService;
    private readonly _languageService;
    private readonly _logService;
    private _caches;
    constructor(_themeService: IThemeService, _languageService: ILanguageService, _logService: ILogService);
    get(provider: DocumentTokensProvider): SemanticTokensProviderStyling;
}
export declare class ModelSemanticColoring extends Disposable {
    static REQUEST_MIN_DELAY: number;
    static REQUEST_MAX_DELAY: number;
    private _isDisposed;
    private readonly _model;
    private readonly _semanticStyling;
    private readonly _provider;
    private readonly _debounceInformation;
    private readonly _fetchDocumentSemanticTokens;
    private _currentDocumentResponse;
    private _currentDocumentRequestCancellationTokenSource;
    private _documentProvidersChangeListeners;
    constructor(model: ITextModel, stylingProvider: SemanticStyling, themeService: IThemeService, languageFeatureDebounceService: ILanguageFeatureDebounceService, languageFeaturesService: ILanguageFeaturesService);
    dispose(): void;
    private _fetchDocumentSemanticTokensNow;
    private static _copy;
    private _setDocumentSemanticTokens;
}
export {};
//# sourceMappingURL=modelService.d.ts.map